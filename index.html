<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <title>Form Order - SuruhBoy</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="style.css">

  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #f4f5f7;
      padding: 20px;
    }
    .card {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px #0001;
      max-width: 600px;
      margin: auto;
    }
    .result-card {
      margin-top: 20px;
      padding: 20px;
      border-radius: 12px;
      background: #fff;
      box-shadow: 0 0 10px #0002;
      display: none;
    }
    .btn {
      display: block;
      width: 100%;
      padding: 14px;
      margin-top: 10px;
      border-radius: 8px;
      text-align: center;
      text-decoration: none;
      color: white;
      background: #007bff;
      font-weight: bold;
      cursor: pointer;
      border: none;
    }
    #copyBtn {
      background: #28a745;
    }
    pre {
      white-space: pre-wrap;
      background: #f0f2f4;
      padding: 15px;
      border-radius: 10px;
      border: 1px solid #e3e6e8;
    }
  </style>
</head>

<body>

<div class="card">
  <h2>Form Order</h2>

  <form id="orderForm">
    <label>Biaya</label>
    <input name="biaya" required>

    <label>Kapan</label>
    <input name="kapan" type="date" required>

    <label>Nama</label>
    <input name="nama" required>

    <label>No HP</label>
    <input name="hp" required id="hp">

    <label>Deskripsi</label>
    <textarea name="deskripsi"></textarea>

    <label>Jemput</label>
    <input name="jemput">

    <label>Antar</label>
    <input name="antar">

    <label>Agent</label>
<select name="agent" required>
  <option value="">-- Pilih Agent --</option>
  <option>Agung</option>
  <option>Agus</option>
  <option>Andi</option>
  <option>Aryo</option>
  <option>Awa</option>
  <option>Bagus</option>
  <option>Diar</option>
  <option>Lutfi Majid</option>
  <option>Malek</option>
  <option>Mbak Yuni</option>
  <option>Naily</option>
  <option>Nia</option>
  <option>Panji</option>
  <option>Restu</option>
  <option>Akhmad Rifki</option>
  <option>Yosi</option>
  <option>Yusuf</option>
  <option>Ilham</option>
  <option>Barkah</option>
  <option>Mukhlis</option>
  <option>Kharisma</option>
  <option>Ardi</option>
  <option>Acil</option>
  <option>Defita</option>
  <option>Fajar</option>
  <option>Ichsan</option>
  <option>Gilang</option>
  <option>Angga Aji</option>
  <option>Putri Utami</option>
  <option>Hana</option>
</select>

    <label>admin</label>
    <input name="admin">

    <button class="btn" type="submit" id="submitBtn">SUBMIT</button>
  </form>
</div>

<!-- HASIL TEMPLATE -->
<div class="result-card" id="resultCard">
  <h2>ðŸŸ¦ ORDER MASUK</h2>
  <pre id="templateBox"></pre>
  <button id="copyBtn" class="btn">COPY TEMPLATE</button>
  <a id="chatBtn" class="btn" target="_blank">CHAT KE AGENT</a>
</div>

<script>
const SCRIPT_URL =
  "https://script.google.com/macros/s/AKfycbwinE9yP9HTE4WWdnvMpu0PJUGPnpBaWg9ENNdtQGMpaIE4bYcTHEyxRE1atiFWCTRv/exec";

const hpInput = document.getElementById("hp");

// Format nomor HP â†’ harus 62xxxx tanpa spasi
hpInput.addEventListener("input", function () {
  let v = this.value.replace(/\D/g, ""); // angka saja

  if (!v.startsWith("62")) {
    v = "62" + v.replace(/^0+/, "");
  }

  this.value = v;
});

document.getElementById("orderForm").addEventListener("submit", async function (e) {
  e.preventDefault();

  const submitBtn = document.getElementById("submitBtn");
  submitBtn.disabled = true;
  submitBtn.textContent = "â³ Mengirim...";

  const form = new FormData(this);

  // Backup form sebelum reset
  const data = {};
  form.forEach((v, k) => data[k] = v);

  // Kirim ke Apps Script
  await fetch(SCRIPT_URL, { method: "POST", body: form });

  // Template aman (menggunakan backtick)
  const template = `
ðŸŸ¦ ORDER MASUK

ðŸ“¦ Biaya: ${data.biaya}
ðŸ“… Kapan: ${data.kapan}
ðŸ‘¤ Nama: ${data.nama}
ðŸ“± https://wa.me/${data.hp}?text=${encodeURIComponent("Hai kak, dengan Suruhboy disini")}
ðŸ“ Deskripsi: ${data.deskripsi || "-"}

ðŸ“ Jemput: ${data.jemput || "-"}
ðŸ“ Antar: ${data.antar || "-"}

ðŸ§‘â€ðŸ’¼ Agent: ${data.agent}
  `.trim();

  document.getElementById("templateBox").textContent = template;
  document.getElementById("resultCard").style.display = "block";

  document.getElementById("chatBtn").href =
    "intent://chat.whatsapp.com/DlIfRxaICuRCXc1ZndEDTc#Intent;scheme=https;package=com.whatsapp.w4b;end";

  this.reset();

  submitBtn.disabled = false;
  submitBtn.textContent = "SUBMIT";
});

// COPY BUTTON
document.getElementById("copyBtn").addEventListener("click", async () => {
  try {
    await navigator.clipboard.writeText(
      document.getElementById("templateBox").textContent
    );

    copyBtn.textContent = "âœ” TERSALIN!";
    copyBtn.style.background = "#1e7c33";

    setTimeout(() => {
      copyBtn.textContent = "COPY TEMPLATE";
      copyBtn.style.background = "#28a745";
    }, 1500);

  } catch {
    alert("Gagal menyalin!");
  }
});
</script>

</body>
</html>










